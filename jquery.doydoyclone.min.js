(function($){var doydoy_counter=0;var doydoy_new_id=null;var glob_prefix_new_elt="id_doydoy_clone_";var doydoy_all_clones=new Array();var doydoy_last_clones=new Array();$.fn.doydoyGetCounter=function(){return doydoy_counter};$.fn.doydoyGetAllClones=function(){return doydoy_all_clones};$.fn.doydoyGetLastClones=function(){return doydoy_last_clones};$.fn.doydoyGetLastNewId=function(){return doydoy_new_id};$.fn.doydoySetPrefixNewId=function(prefix_new_elt){glob_prefix_new_elt=prefix_new_elt;return this};$.fn.initAllClonesList=function(){doydoy_all_clones=new Array();return this};$.fn.doydoyCloneAfter=function(params){params=$.extend(params,{method:"after"});return this.doydoyClone(params)};$.fn.doydoyCloneBefore=function(params){params=$.extend(params,{method:"before"});return this.doydoyClone(params)};$.fn.doydoyCloneAppend=function(params){params=$.extend(params,{method:"append"});return this.doydoyClone(params)};$.fn.doydoyClonePrepend=function(params){params=$.extend(params,{method:"prepend"});return this.doydoyClone(params)};$.fn.doydoyClone=function(params){var function_plugin_name="after";params=$.extend({method:"",target:"",new_name:false,prefix_new_elt:glob_prefix_new_elt},params);doydoy_counter++;switch(params.method){case"after":case"before":case"append":case"prepend":function_plugin_name=params.method;break;default:function_plugin_name="after";break}this.each(function(){var id_elt;var elt_a_cloner=this;var doydoy_counter_clone=doydoy_counter;doydoy_last_clones=null;doydoy_last_clones=new Array();doydoy_new_id=null;if($(this).attr("id")==undefined){if($(this).attr("name")!=undefined){id_elt=params.prefix_new_elt+$(this).attr("name")}else{id_elt=params.prefix_new_elt+$(this).prop("tagName")}}else{id_elt=$(this).attr("id")}if(params.target!=""){dernier_element=params.target}else{dernier_element=$(this)}function function_clone(){return $(elt_a_cloner).clone(true).each(function(){doydoy_new_id=id_elt+"_"+doydoy_counter_clone;$(this).attr("id",doydoy_new_id);if(params.new_name){if(typeof($(this).attr("name"))!="undefined"){$(this).attr("name",$(this).attr("name")+"_"+doydoy_counter_clone)}}if(typeof(doydoy_all_clones[doydoy_counter_clone-1])=="undefined"){doydoy_all_clones[doydoy_counter_clone-1]=new Array()}doydoy_all_clones[doydoy_counter_clone-1]["parent"]={id:doydoy_new_id,id_before:id_elt,num_clone:doydoy_counter_clone,name:((typeof($(this).attr("name"))=="undefined")?"":$(this).attr("name")),elt:$(this)};doydoy_last_clones.parent={id:doydoy_new_id,id_before:id_elt,num_clone:doydoy_counter_clone,name:((typeof($(this).attr("name"))=="undefined")?"":$(this).attr("name")),elt:$(this)};doydoy_counter_clone++})}eval("$(dernier_element).each(function(){ $(this)."+function_plugin_name+"(function_clone())})");doydoy_last_clones.child=new Array();for(var i=doydoy_counter;i<(doydoy_counter_clone);i++){var cpt_child=0;var id_before="";$("#"+id_elt+"_"+i+" *").each(function(){id_before="";if(typeof($(this).attr("id"))!="undefined"){id_before=$(this).attr("id");$(this).attr("id",id_before+"_"+i)}if(params.new_name){if(typeof($(this).attr("name"))!="undefined"){$(this).attr("name",$(this).attr("name")+"_"+i)}}if(typeof(doydoy_all_clones[i-1]["child"])=="undefined"){doydoy_all_clones[i-1]["child"]=new Array()}doydoy_all_clones[i-1]["child"][cpt_child]={id:((typeof($(this).attr("id"))=="undefined")?"":$(this).attr("id")),id_before:id_before,num_clone:i,name:((typeof($(this).attr("name"))=="undefined")?"":$(this).attr("name")),elt:$(this)};if(i==(doydoy_counter_clone-1)){doydoy_last_clones.child[cpt_child]={id:((typeof($(this).attr("id"))=="undefined")?"":$(this).attr("id")),id_before:id_before,num_clone:i,name:((typeof($(this).attr("name"))=="undefined")?"":$(this).attr("name")),elt:$(this)};if(params.each_last_child_callback!=undefined){params.each_last_child_callback(cpt_child)}}if(params.each_child_callback!=undefined){params.each_child_callback((i-1),cpt_child)}cpt_child++});if(params.each_callback!=undefined){params.each_callback((i-1))}}doydoy_counter=doydoy_counter_clone-1});if(params.callback!=undefined){params.callback()}return this}})(jQuery);